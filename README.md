# minesweeper_with_hexagon

正六角形のグリッド上のマインスイーパー

## 特徴

- グリッドが正六角形
- 数字を中クリックでクリック（あるいは長押し）で、旗を自動でたてたり、空きマスを開けたりできる

## 制作方法

claude.ai に以下のプロンプトを渡し、変更を加えたもの。

> # タイトル
>
> 六角形のマインスイーパ with javascript
>
> # 難易度
>
> 7/10
>
> # 小さな目標
>
> ### 六角形のグリッドとそれをどう表すか
>
> - データ
>   - grid[i][j]: i 行 j 列のマス。数字は 0 から 7 まで
>     - 0-6:周囲の爆弾の数, -1:爆弾, 7:周囲に爆弾なし
>
> ### グリッドの表示
>
> - データ
>   - 正六角形の外心の半径: $r$
>   - 高さ: $h = r\sqrt{3}$
>   - 幅: $w = $r$
> - grid[i][j]: 縦 $hi/2$, 横 $w(j+i\%2)$
>
> ### 爆弾の設置
>
> - ランダムに配置
> - 個数: NUM_BOMBS
>
> ### 各セルの周囲の爆弾の数を計算
>
> - 隣接セルの取得
>   - (i,j-1), (i,j+1), (i-1,j), (i+1,j)
>   - 偶数行: (i-1,j-1), (i+1,j-1)
>   - 奇数行: (i-1,j+1), (i+1,j+1)
>
> ### セルを開く
>
> - データ
>   - opened[i][j]: i 行 j 列のセルが開かれているかどうか
> - セルを左クリックすると、そのセルを開く
>   - クリックしたセルの周囲の、状態が 7 のセルを再帰的に開ける
>
> ### セルにフラグを付けるメカニズムを作成
>
> - データ
>   - flagged[i][j]: i 行 j 列のセルにフラグを付けたかどうか
> - セルを右クリックした場合、そのセルにフラグを付け、外す
> - 数字の書かれたセルを中央ボタンでクリック、あるいは長押し
>   - クリックされたセルの数字と、周囲の旗の数が等しければ、周囲の旗のないセルを開ける
>
> ### ゲームの勝敗に関するメカニズムを作成
>
> - 爆弾がクリックされた場合、LOSE
> - 爆弾以外のセルがすべて開いた場合、WIN
>
> ### ゲームを再開するメカニズムを作成
>
> - 再開ボタンがクリックされたら、ゲームを再開する
>
> ### 最初のクリックが常に安全であるメカニズムを作成
>
> - 最初にクリックされたセルが爆弾の場合、爆弾を再配置する
>
> ### タイマーに関するメカニズムを作成
>
> - 最初のセルがクリックされたときにタイマーを開始する
> - ゲームに勝ったときまたは負けたときにタイマーを停止する
>
> ### さらに大事な情報
>
> - 残り爆弾の数(爆弾の数-フラグの数)を表示する
> - 閉じられていて、旗のないセルの数/全体のセル数 を表示する
>
> ### 運で失敗するケースを考慮するメカニズムを作成
>
> - 今回は難しいので行わない
